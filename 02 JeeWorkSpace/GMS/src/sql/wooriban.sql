SELECT * FROM TAB;

-- 테이블 생성
CREATE TABLE RPROJECT_TEAM(
TEAM_ID VARCHAR2(20),
TEAM_NAME VARCHAR2(20),
CONSTRAINT TEAM_ID_PK PRIMARY KEY(TEAM_ID)
);

CREATE TABLE MEMBER(
MEM_ID VARCHAR2(20),
TEAM_ID VARCHAR2(20),
NAME VARCHAR2(20),
AGE DECIMAL,
ROLL VARCHAR2(20) DEFAULT '팀원',
CONSTRAINT MEM_ID_PK PRIMARY KEY(MEM_ID),
CONSTRAINT MEMBE_FK FOREIGN KEY(TEAM_ID) REFERENCES RPROJECT_TEAM(TEAM_ID)
);

-- 데이터 입력
INSERT INTO RPROJECT_TEAM VALUES('ATEAM', '저스티스');
INSERT INTO RPROJECT_TEAM VALUES('HTEAM', '아마조네스');
INSERT INTO RPROJECT_TEAM VALUES('CTEAM', '가오갤');
INSERT INTO RPROJECT_TEAM VALUES('STEAM', '어벤저스');

INSERT INTO MEMBER VALUES('A1', 'ATEAM', '형준', 34, '팀장');
INSERT INTO MEMBER VALUES('A2', 'ATEAM', '세인', 35, '팀원');
INSERT INTO MEMBER VALUES('A3', 'ATEAM', '희태', 21, '팀원');
INSERT INTO MEMBER VALUES('A4', 'ATEAM', '상훈', 29, '팀원');
INSERT INTO MEMBER VALUES('A5', 'ATEAM', '태형', 25, '팀원');
INSERT INTO MEMBER VALUES('H1', 'HTEAM', '혜리', 26, '팀장');
INSERT INTO MEMBER VALUES('H2', 'HTEAM', '지은', 26, '팀원');
INSERT INTO MEMBER VALUES('H3', 'HTEAM', '준', 27, '팀원');
INSERT INTO MEMBER VALUES('H4', 'HTEAM', '재경', 30, '팀원');
INSERT INTO MEMBER VALUES('H5', 'HTEAM', '단아', 26, '팀원');
INSERT INTO MEMBER VALUES('C1', 'CTEAM', '최정훈', 32, '팀장');
INSERT INTO MEMBER VALUES('C2', 'CTEAM', '윤호', 31, '팀원');
INSERT INTO MEMBER VALUES('C3', 'CTEAM', '가은', 29, '팀원');
INSERT INTO MEMBER VALUES('C4', 'CTEAM', '정훈', 23, '팀원');
INSERT INTO MEMBER VALUES('C5', 'CTEAM', '승태', 30, '팀원');
INSERT INTO MEMBER VALUES('S1', 'STEAM', '승호', 27, '팀장');
INSERT INTO MEMBER VALUES('S2', 'STEAM', '소진', 26, '팀원');
INSERT INTO MEMBER VALUES('S3', 'STEAM', '이슬', 29, '팀원');
INSERT INTO MEMBER VALUES('S4', 'STEAM', '진태', 26, '팀원');
INSERT INTO MEMBER VALUES('S5', 'STEAM', '누리', 30, '팀원');

------------------------------------------------------------------------

-- 테이블 조회
SELECT * FROM TAB;

-- 시퀀스 조회
SELECT * FROM user_sequences;

-- 제약조건 조회
SELECT * FROM USER_CONSTRAINTS;

SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'RPROJECT_TEAM';
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'MEMBER';
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'EXAM';
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'RECORD';
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME = 'SUBJECT';

-- 이름 변경
ALTER TABLE TEAMZ
RENAME TO RPROJECT_TEAM;
ALTER TABLE TEAMW
RENAME TO MEMBER;

-- 테이블 속성명 변경
ALTER TABLE MEMBER RENAME COLUMN MEM_NAME TO NAME;
ALTER TABLE MEMBER RENAME COLUMN MEM_AGE TO AGE;

---------------------------------------------------------------

-- 시퀀스 생성
CREATE SEQUENCE subject_seq START WITH 1;
CREATE SEQUENCE EXAM_SEQ START WITH 1;
CREATE SEQUENCE RECORD_SEQ START WITH 1;

-- 테이블 생성
CREATE TABLE EXAM(
    EXAM_SEQ DECIMAL,
    MEM_ID VARCHAR2(20),
    SUBJECT_SEQ DECIMAL,
    SCORE VARCHAR2(20),
    MONTH VARCHAR2(20),
    RECORD_SEQ DECIMAL,
    CONSTRAINT EXAM_PK PRIMARY KEY(EXAM_SEQ),
    CONSTRAINT EXAM_FK1 FOREIGN KEY(MEM_ID) REFERENCES MEMBER(MEM_ID),
    CONSTRAINT EXAM_FK2 FOREIGN KEY(SUBJECT_SEQ) REFERENCES SUBJECT(SUBJECT_SEQ),
    CONSTRAINT EXAM_FK3 FOREIGN KEY(RECORD_SEQ) REFERENCES RECORD(RECORD_SEQ)
    );
    
CREATE TABLE SUBJECT(
    SUBJECT_SEQ DECIMAL,
    SUB_NAME VARCHAR2(20),
    CONSTRAINT SUBJECT_PK PRIMARY KEY(SUBJECT_SEQ)
);

CREATE TABLE RECORD(
    RECORD_SEQ DECIMAL,
    AVG VARCHAR2(20),
    GRADE VARCHAR2(20),
    CONSTRAINT RECORD_SEQ_PK PRIMARY KEY(RECORD_SEQ)
);

-- 외래키 제약조건 설정
ALTER TABLE MEMBER
ADD CONSTRAINT MEMBER_FK
FOREIGN KEY (TEAM_ID) REFERENCES RPROJECT_TEAM(TEAM_ID);

-- 데이터 입력
INSERT INTO SUBJECT(SUBJECT_SEQ,SUB_NAME) VALUES(SUBJECT_SEQ.NEXTVAL,'JAVA');
INSERT INTO SUBJECT(SUBJECT_SEQ,SUB_NAME) VALUES(SUBJECT_SEQ.NEXTVAL,'SQL');
INSERT INTO SUBJECT(SUBJECT_SEQ,SUB_NAME) VALUES(SUBJECT_SEQ.NEXTVAL,'HTML5');
INSERT INTO SUBJECT(SUBJECT_SEQ,SUB_NAME) VALUES(SUBJECT_SEQ.NEXTVAL,'R');
INSERT INTO SUBJECT(SUBJECT_SEQ,SUB_NAME) VALUES(SUBJECT_SEQ.NEXTVAL,'PYTHON');
